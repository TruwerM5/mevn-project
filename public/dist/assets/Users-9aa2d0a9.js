import{u as h,d as f,r as g,h as _,o as r,c as l,a as s,F as u,j as m,t as o,g as v}from"./index-d3e722ee.js";const y={class:"container"},k=["onClick"],j={__name:"Users",setup(S){const c=h(),d=f(),t=g([]);_(async()=>{fetch("/api/users").then(e=>e.json()).then(e=>{t.value=e}).catch(e=>console.log(e.message))});function p(e){e.login==c.user.login&&(c.logout(),d.push({name:"signup"}));const i=JSON.stringify(e._id);fetch("/api/deleteUser",{method:"post",body:i,headers:{"Content-Type":"application/json"}}).then(()=>{t.value=t.value.filter(a=>a._id!=e.id)}).catch(a=>{console.log("Error"+a.message)})}return(e,i)=>(r(),l(u,null,[s("div",y,[(r(!0),l(u,null,m(t.value,(n,a)=>(r(),l("div",{key:a,class:"text-sky-600"},[s("p",null,"Firstname: "+o(n.firstname),1),s("p",null,"Secondname: "+o(n.secondname),1),s("p",null,"Login: "+o(n.login),1),s("a",{href:"#",onClick:v(x=>p(n),["prevent"]),class:"text-rose-600"},"Delete User",8,k)]))),128))]),s("span",null,o(t.value.length),1)],64))}};export{j as default};
